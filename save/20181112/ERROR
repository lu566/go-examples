
node:23  docker权限
[DBUG] 2018/11/12 13:12 [hidevops.io/hinode/vendor/hidevops.io/hioak/starter/docker.(*ImageClient).BuildImage:164] Error Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Post http://%2Fvar%2Frun%2Fdocker.sock/v1.24/build?buildargs=null&cachefrom=null&cgroupparent=&cpuperiod=0&cpuquota=0&cpusetcpus=&cpusetmems=&cpushares=0&dockerfile=Dockerfile&labels=null&memory=0&memswap=0&networkmode=&rm=1&shmsize=0&t=docker-registry-default.app.vpclub.io%2Fmoses%2Fsearch-consumer%3A4&ulimits=null: dial unix /var/run/docker.sock: connect: permission denied
Error image [docker-registry-default.app.vpclub.io/moses/search-consumer:4] build filed
Error  Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Post http://%2Fvar%2Frun%2Fdocker.sock/v1.24/build?buildargs=null&cachefrom=null&cgroupparent=&cpuperiod=0&cpuquota=0&cpusetcpus=&cpusetmems=&cpushares=0&dockerfile=Dockerfile&labels=null&memory=0&memswap=0&networkmode=&rm=1&shmsize=0&t=docker-registry-default.app.vpclub.io%2Fmoses%2Fsearch-consumer%3A4&ulimits=null: dial unix /var/run/docker.sock: connect: permission denied



node:14 没有更多资源

Back-off
Back-off restarting failed container
7 times in the last 2 minutes
9:35:29 PM
Failed
Error: failed to start container "syncconfig-admin-v2-1": Error response from daemon: open /var/run/docker/libcontainerd/syncconfig-admin-v2-1/config.json: no space left on device


node:
{"errorDetail":{"message":"Get https://registry-1.docker.io/v2/clarechu/base-image-java/manifests/0.1: Get https://auth.docker.io/token?scope=repository%3Aclarechu%2Fbase-image-java%3Apull\u0026service=registry.docker.io: net/http: request canceled (Client.Timeout exceeded while awaiting headers)"},"error":"Get https://registry-1.docker.io/v2/clarechu/base-image-java/manifests/0.1: Get https://auth.docker.io/token?scope=repository%3Aclarechu%2Fbase-image-java%3Apull\u0026service=registry.docker.io: net/http: request canceled (Client.Timeout exceeded while awaiting headers)"}
[INFO] image [docker-registry-default.app.vpclub.io/moses/syncconfig-admin:3] start push:
[INFO] 2018/11/12 14:05 image push
{"status":"The push refers to a repository [docker-registry-default.app.vpclub.io/moses/syncconfig-admin]"}
{"errorDetail":{"message":"An image does not exist locally with the tag: docker-registry-default.app.vpclub.io/moses/syncconfig-admin"},"error":"An image does not exist locally with the tag: docker-registry-default.app.vpclub.io/moses/syncconfig-admin"}


node：10
git clone 超时
[DBUG] 2018/11/13 01:53 [hidevops.io/hinode/vendor/hidevops.io/hioak/starter/scm/git.(*repository).Clone:41] Error%!(EXTRA *url.Error=Get https://gitlab.vpclub.cn/moses/freight-admin-consumer.git/info/refs?service=git-upload-pack: dial tcp 218.17.39.178:443: i/o timeout)
Error clone https://gitlab.vpclub.cn/moses/freight-admin-consumer.git filed:
Error  Get https://gitlab.vpclub.cn/moses/freight-admin-consumer.git/info/refs?service=git-upload-pack: dial tcp 218.17.39.178:443: i/o timeout


执行时资源不足被驱逐
9:32:48 AM	Normal	Killing 	Killing container with id docker://import-provider-v2-1:Need to kill Pod
9:32:48 AM	Warning	Evicted 	The node was low on resource: imagefs.
9:27:55 AM	Normal	Started 	Started container
9:27:54 AM	Normal	Created 	Created container
9:27:54 AM	Normal	Pulled 	Successfully pulled image "docker.vpclub.cn/hidevopsio/hinode-java-jar:1.22"



jar缺失
cp: cannot stat ‘target/freight-consumer-1.0.0.’: No such file or directory
Error compile filed
Error  exit status 1

cp: cannot stat ‘target/merchants-consumer-1.1.15.’: No such file or directory
Error compile filed
Error  exit status 1

<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <groupId>cn.vpclub.moses.merchants.consumer</groupId>
    <artifactId>merchants-consumer</artifactId>
    <version>1.1.15</version>

    <name>merchants-consumer</name>
    <description>merchants-consumer</description>
    <parent>
        <groupId>cn.vpclub</groupId>
        <artifactId>spring-boot-starters</artifactId>
        <version>1.5.18-SNAPSHOT</version>
    </parent>
    <properties>
        <!-- dependency versions -->
        <moses-sms.version>1.0.10-SNAPSHOT</moses-sms.version>
        <moses-framework.version>1.0.14-SNAPSHOT</moses-framework.version>
    </properties>

    <dependencies>
        <!-- spring-boot -->
        <dependency>
            <groupId>cn.vpclub</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        <!-- test -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-test</artifactId>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-actuator</artifactId>
        </dependency>

        <!-- grpc -->
        <dependency>
            <groupId>cn.vpclub</groupId>
            <artifactId>spring-boot-starter-grpc</artifactId>
        </dependency>
        <dependency>
            <groupId>cn.vpclub</groupId>
            <artifactId>spring-boot-starter-hazelcast</artifactId>
        </dependency>
        <dependency>
            <groupId>cn.vpclub</groupId>
            <artifactId>spring-boot-starter-cors</artifactId>
        </dependency>

        <dependency>
            <groupId>cn.vpclub.moses</groupId>
            <artifactId>sms</artifactId>
            <version>${moses-sms.version}</version>
        </dependency>
        <dependency>
            <groupId>cn.vpclub</groupId>
            <artifactId>moses-tests</artifactId>
            <version>${moses-framework.version}</version>
            <exclusions>
                <exclusion>
                    <groupId>cn.vpclub</groupId>
                    <artifactId>moses-data</artifactId>
                </exclusion>
            </exclusions>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>cn.vpclub</groupId>
            <artifactId>moses-core</artifactId>
            <version>${moses-framework.version}</version>
        </dependency>
        <dependency>
            <groupId>cn.vpclub</groupId>
            <artifactId>moses-utils</artifactId>
            <version>${moses-framework.version}</version>
        </dependency>
        <dependency>
            <groupId>cn.vpclub</groupId>
            <artifactId>moses-web</artifactId>
            <version>${moses-framework.version}</version>
        </dependency>
        <!-- Swagger -->
        <dependency>
            <groupId>cn.vpclub</groupId>
            <artifactId>spring-boot-starter-swagger</artifactId>
        </dependency>

    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
            </plugin>
            <plugin>
                <groupId>org.xolstice.maven.plugins</groupId>
                <artifactId>protobuf-maven-plugin</artifactId>
            </plugin>
            <plugin>
                <artifactId>maven-surefire-plugin</artifactId>
            </plugin>
            <plugin>
                <artifactId>maven-failsafe-plugin</artifactId>
            </plugin>
            <plugin>
                <groupId>org.sonarsource.scanner.maven</groupId>
                <artifactId>sonar-maven-plugin</artifactId>
            </plugin>
            <plugin>
                <groupId>org.jacoco</groupId>
                <artifactId>jacoco-maven-plugin</artifactId>
            </plugin>
        </plugins>

    </build>

</project>